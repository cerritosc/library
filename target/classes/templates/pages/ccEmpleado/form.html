<!--decorated page-->
<html lang="en" dir="ltr"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:th="http://www.thymeleaf.org"
      layout:decorate="~{layouts/basic-layout}">

<head>
    <title>Empleado</title>

    <!-- Custom CSS from main page-->
</head>
<body>
<section layout:fragment="content" th:remove="tag">
<div class="container-fluid">
    <div class="header">
        <h1 class="header-title" th:inline="text" th:text="'Crear/editar ' + 'Empleado'"></h1>
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a th:href="@{/index}" th:inline="text" th:text="#{label.home}"></a></li>
                <li class="breadcrumb-item" aria-current="page"><a th:href="@{/ccEmpleado}" th:inline="text" th:text="#{label.list} + ' '  + 'Empleado'"></a></li>
                <li class="breadcrumb-item active" aria-current="page">Crear/editar Empleado</li>
            </ol>
        </nav>
    </div>

    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-body">
                    <h4 class="card-title">Empleado</h4>
                    <h6 class="card-subtitle">Empleado</h6>
                </div>
                <hr class="m-t-0">
                <form id="formCcEmpleado" enctype="multipart/form-data" class="needs-validation needs-validation-manual form-horizontal" novalidate th:action="@{/ccEmpleado/save}" th:object="${ccEmpleado}" method="POST">
                    <ul th:if="${#fields.hasErrors('global')}">
                        <li th:each="err : ${#fields.errors('global')}" th:text="${err}"></li>
                    </ul>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-sm-12 col-lg-12">
                                <div class="form-group row">
                                    <label for="stNombres" class="col-sm-2 text-right control-label col-form-label">Nombres</label>
                                    <div class="col-sm-9">
                                        <input type="text" class="form-control" id="stNombres"
                                                    th:field="*{stNombres}" placeholder="Nombres" 
                                                    maxlength="200" required>
                                        <span id="stNombresError" style="display: none; color: red;">Campo obligatorio</span>
                                        <div th:errors="*{stNombres}"></div>
                                    </div>
                                </div>
                                <br>
                                <div class="form-group row">
                                    <label for="stApellidos" class="col-sm-2 text-right control-label col-form-label">Apellidos</label>
                                    <div class="col-sm-9">
                                        <input type="text" class="form-control" id="stApellidos"
                                                    th:field="*{stApellidos}" placeholder="Apellidos" 
                                                    maxlength="200" required>
                                        <span id="stApellidosError" style="display: none; color: red;">Campo obligatorio</span>
                                        <div th:errors="*{stApellidos}"></div>
                                    </div>
                                </div>
                                <br>
                                <div class="form-group row">
                                        <label for="ccRol" class="col-sm-2 text-right control-label col-form-label">Rol</label>
                                        <div class="col-sm-9">
                                                <select class="select2" id="ccRol" th:field="*{ccRol}" required>
                                                    <option th:if="${ccEmpleado.ccRol != null}" th:value="${ccEmpleado.ccRol.skRol}" th:text="*{ccRolStDescripcionDelegate}" selected="selected"></option>
                                                </select>
                                                <span id="ccRolError" style="display: none; color: red;">Campo obligatorio</span>
                                                <div th:errors="*{ccRol}"></div>
                                        </div>
                                </div>
                                <br>
                                <div class="form-group row">
                                        <label for="ccSupervisor" class="col-sm-2 text-right control-label col-form-label">Supervisor</label>
                                        <div class="col-sm-9">
                                                <select class="select2" id="ccSupervisor" th:field="*{ccSupervisor}">
                                                    <option th:if="*{ccSupervisor != null}" th:value="*{supervisorIdDelegate}" th:text="*{supervisorStDescripcionDelegate}" selected="selected"></option>
                                                </select>
                                                <span id="ccEmpleadoError" style="display: none; color: red;">Campo obligatorio</span>
                                                <div th:errors="*{ccSupervisor}"></div>
                                        </div>
                                </div>

                                <input type="hidden" th:field="*{skEmpleado}"/>
                                <input type="hidden" id="fcCreaFecha" th:field="*{fcCreaFecha}">
                                <input type="hidden" id="fcModFecha" th:field="*{fcModFecha}">
                                <input type="hidden" id="stCreaUsuario" th:field="*{stCreaUsuario}">
                                <input type="hidden" id="stModUsuario" th:field="*{stModUsuario}">
                                <input type="hidden" id="bnEstado" th:field="*{bnEstado}" /> 
                            </div>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="form-group m-b-0 text-center">
                            <button type="submit" class="btn btn-info waves-effect waves-light" th:text="#{action.save}"></button>
                            <button id="cancel" type="button" class="btn btn-danger waves-effect waves-light" th:text="#{action.cancel}"></button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
</section>
<section layout:fragment="js" th:remove="tag">
    <!-- Required libraries -->
    
    <script th:inline="javascript">
        const urlCcUsuarioSelect2 = /*[[@{/ccUsuario/cboFilterS2}]]*/"";
        const urlCcRolSelect2 = /*[[@{/ccRol/cboFilterS2}]]*/"";
        const urlCcEmpleadoSelect2 = /*[[@{/ccEmpleado/cboFilterS2}]]*/"";
    </script>
    <script>
    /*DatePicker init*/
    jQuery('.datepicker-initializer').datepicker({
        format: "dd/mm/yyyy",
        autoclose: true,
        todayHighlight: true,
        orientation: "bottom",
        language: "es"
    });
    /*Select 2 init*/
    renderSelect2('#ccUsuario', urlCcUsuarioSelect2, 5);
    renderSelect2('#ccRol', urlCcRolSelect2, 5);
    renderSelect2('#ccSupervisor', urlCcEmpleadoSelect2, 5);
    /* Submit validation, antes de ejecutar la funcion de guardado ajaxSave() */
     $('#formCcEmpleado').submit(function(event){
        var formulario =  $('#formCcEmpleado');

        var validacionBootstrapCorrecta = formulario[0].checkValidity();
        var validacionManualCorrecta = Validador.validarFormulario(formulario);
        if (!(validacionBootstrapCorrecta && validacionManualCorrecta)) {
            // cancels the form submission
            event.preventDefault();
            event.stopPropagation();
        }         
        formulario.addClass('was-validated');
    });

    /*Cancel or return button*/
    $('#cancel').on('click', function () {
        history.go(-1);
    } );
    </script>
</section>
</body>
</html>
